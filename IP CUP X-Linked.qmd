---
title: "IP CUP"
format: pdf
editor: visual
pdf-engine: lualatex
---

## Quarto

```{r, pakker}
#| echo: false
library(tidyverse)
library(haven)
library(survival)


```

```{r, data}
#| echo: false
hofte_analysefil <- read_sav("//ihelse.net/Kvalitetsregister/hbe/2011-06449/STATISTIKK/Hofte/2024/Hofte_2024.sav")



```

```{r, analysefil}
#| echo: false

analysefil <- hofte_analysefil %>% 
  filter(P_ACET_PRODUKT == 55) %>% 
  mutate(kopptype = case_when(P_ACET_TYPE %in% c(69:98,100:105) ~ 1)) %>% 
  filter(kopptype == 1)#%>% 
  mutate(INDIKATOR_2 = case_when(INDIKATOR ==  0 |
                                R_FRAKTUR == 1 | #4 totalt i datasette
                                R_GLUTEALSVIKT == 1 | #3 totalt i datasette
                                R_INFEKSJON == 1 | #2 totalt i datasette
                                R_LUKSASJON == 1 ~ 0,  #ingen 
                                INDIKATOR == 1 & 
                                   is.na(R_FRAKTUR) &
                                   is.na(R_GLUTEALSVIKT) &
                                   is.na(R_GLUTEALSVIKT) &
                                   is.na(R_LUKSASJON) ~ 1 ))

kopp1 <- analysefil %>% filter(kopptype == 1) #Highly crosslinked polyethylen


```

```{r, overlevelse}
#| echo: false

KM <- summary(survfit(Surv(SURVYRS, INDIKATOR_2)~1, data=kopp1))
#83 er 8.83 84 er 10.12

ti_års_overlevelse_kopp <- KM$surv[83] 
ti_års_nrisk_kopp <- KM$n.risk[83]
```
